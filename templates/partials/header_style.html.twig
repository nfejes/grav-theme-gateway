{% if page.header.hero %}
  {% set header_image_url = page.media.images[page.header.hero].url %}
{% else %}
  {% set custom_hero = theme_var('default_header_hero') %}
  {% set header_image_url = url('theme://img/' ~ (custom_hero ? 'hero/' ~ (custom_hero|first).name : 'hero-bg.jpg')) %}
{% endif %}

<style type="text/css" id="rescue_custom_css">
.home-header-bg {
  background:url( '{{ header_image_url }}' ) #ffffff no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
/* for background-size:cover replacement on iOS devices */
@media only screen and (max-width: 40em) {
  .home-header-bg {
    background-attachment: scroll;
  }
}
@media only screen and (orientation: portrait) and (device-width: 320px), (device-width: 768px) {
  .home-header-bg {
    -webkit-background-size: auto 150%;
    background-attachment: scroll;
  }
}
@media only screen and (orientation: landscape) and (device-width: 320px), (device-width: 768px) {
  .home-header-bg {
    -webkit-background-size: 150% auto;
    background-attachment: scroll;
  }
}

.bg-image-header {
  background:url( '{{ header_image_url }}' ) center bottom #ffffff;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  height: 100%;
}

.bg-center-center {
  background-position: center center;
}

.site-branding {
  margin: 0 auto;
  display: table;
  padding-top: 2em;
}
</style>

<script>
window.addEventListener("resize", function() {
  var viewportHeight = document.documentElement.clientHeight;
  var headers = document.getElementsByClassName('home-header-bg');
  for (var i = 0; i < headers.length; i++) {
    var header = headers.item(i);
    header.style.backgroundPositionY = (100 - 50 * header.clientHeight / viewportHeight) + '%';
  }
});
</script>
